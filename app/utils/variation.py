import random
from datetime import datetime

# --- Seasonal / Time Context ---
def get_season():
    month = datetime.now().month
    if month in [11, 12, 1, 2]:
        return "শীতকাল"
    elif month in [3, 4, 5]:
        return "গ্রীষ্মকাল"
    elif month in [6, 7, 8, 9]:
        return "বর্ষাকাল"
    else:
        return "শরৎকাল"

def get_day_context():
    day = datetime.now().weekday()
    hour = datetime.now().hour
    if day == 4:
        return "জুমার দিন — আত্মিক, সুন্নাহ ও অনুপ্রেরণামূলক কনটেন্টের জন্য উপযুক্ত"
    elif day in [5, 6]:
        return "সাপ্তাহিক ছুটির দিন — মানুষ রিল্যাক্সড, সিদ্ধান্ত নিতে আগ্রহী"
    elif hour < 10:
        return "সকালবেলা — মানুষ দিন শুরু করছে, অনুপ্রেরণামূলক ও সতর্কতামূলক কনটেন্ট ভালো কাজ করে"
    elif hour >= 21:
        return "রাতের বেলা — মানুষ চিন্তিত ও একাকী, সহানুভূতিশীল ও সমাধানমুখী টোন কার্যকর"
    else:
        return "সাধারণ সময় — তথ্যভিত্তিক ও সমাধানমুখী কনটেন্ট"

SEASONAL_HEALTH_CONTEXT = {
    "শীতকাল": [
        "শীতে হাঁটু ও জয়েন্টের ব্যথা বেড়ে যাওয়া",
        "ঠান্ডায় রক্ত চলাচল কমে যাওয়া ও হাত-পা ঠান্ডা হওয়া",
        "শ্বাসকষ্ট, সর্দি-কাশি ও সাইনাসের প্রকোপ",
        "শীতকালীন বিষণ্নতা ও শরীর ভারী লাগা",
        "ত্বক শুষ্ক হয়ে যাওয়া ও চর্মরোগ",
        "রোগ প্রতিরোধ ক্ষমতা কমে ঘন ঘন অসুস্থ হওয়া"
    ],
    "গ্রীষ্মকাল": [
        "গরমে মাথাব্যথা ও মাইগ্রেন বেড়ে যাওয়া",
        "ডিহাইড্রেশন ও হিট স্ট্রোকের ঝুঁকি",
        "গরমে ঘুমের সমস্যা ও অস্থিরতা",
        "অতিরিক্ত ঘামে শরীর দুর্বল ও পুষ্টিহীন হওয়া",
        "গ্যাস্ট্রিক ও হজমের সমস্যা বেড়ে যাওয়া",
        "গরমে রক্তচাপের ওঠানামা"
    ],
    "বর্ষাকাল": [
        "বর্ষায় আর্থ্রাইটিস ও হাড়ের ব্যথা তীব্র হওয়া",
        "ছত্রাক সংক্রমণ ও চর্মরোগের প্রকোপ",
        "বর্ষায় ডায়রিয়া, টাইফয়েড ও পানিবাহিত রোগ",
        "আর্দ্রতায় শ্বাসকষ্ট ও অ্যালার্জি",
        "মেঘলা আবহাওয়ায় মানসিক অবসাদ ও এনার্জি কম লাগা",
        "মশাবাহিত রোগের ঝুঁকি — ডেঙ্গু, ম্যালেরিয়া"
    ],
    "শরৎকাল": [
        "মৌসুম বদলে শরীর মানিয়ে নিতে পারছে না",
        "হঠাৎ জ্বর, গলাব্যথা ও ভাইরাল ইনফেকশন",
        "অ্যালার্জি ও হাঁচি-কাশির প্রকোপ",
        "রোগ প্রতিরোধ ক্ষমতা দুর্বল হওয়ার মৌসুম",
        "ত্বকের সমস্যা ও চুলকানি বেড়ে যাওয়া"
    ]
}

# --- Core Health Domains ---
HEALTH_DOMAINS = [
    "হিজামা ও কাপিং থেরাপি",
    "সাধারণ স্বাস্থ্য সচেতনতা",
    "মানসিক স্বাস্থ্য ও স্ট্রেস ম্যানেজমেন্ট",
    "ব্যথা ব্যবস্থাপনা — ঘাড়, কোমর, হাঁটু",
    "রোগ প্রতিরোধ ক্ষমতা বৃদ্ধি",
    "ডায়াবেটিস সচেতনতা ও প্রতিরোধ",
    "উচ্চ রক্তচাপ ও হৃদরোগ সচেতনতা",
    "হজম ও গ্যাস্ট্রিক সমস্যা",
    "ঘুমের সমস্যা ও ইনসোমনিয়া",
    "থাইরয়েড ও হরমোনজনিত সমস্যা",
    "মাইগ্রেন ও দীর্ঘস্থায়ী মাথাব্যথা",
    "নারী স্বাস্থ্য — মাসিক সমস্যা, পিসিওএস",
    "চর্মরোগ ও ত্বকের যত্ন",
    "কিডনি ও লিভার স্বাস্থ্য সচেতনতা",
    "শিশু স্বাস্থ্য ও পুষ্টি",
    "বয়স্কদের স্বাস্থ্য ও আর্থ্রাইটিস",
    "ডিটক্সিফিকেশন ও শরীর পরিশোধন",
    "পুষ্টি ও সুষম খাদ্যাভ্যাস",
    "শারীরিক কার্যকলাপ ও সক্রিয় জীবনযাপন",
    "প্রাকৃতিক ও বিকল্প চিকিৎসা পদ্ধতি"
]

POST_TYPES = [
    "সমস্যা সচেতনতা (Problem Awareness)",
    "সমাধান শিক্ষামূলক পোস্ট (Solution Education)",
    "বিশ্বাস তৈরির পোস্ট (Trust Building)",
    "রোগীর সাফল্যের গল্প (Success Story)",
    "মিথ ভাঙা (Myth Busting)",
    "তুলনামূলক পোস্ট — প্রাকৃতিক vs ওষুধনির্ভর চিকিৎসা",
    "আগে-পরের অভিজ্ঞতা (Before & After Story)",
    "জরুরি স্বাস্থ্য সতর্কতা (Health Warning)",
    "কৌতূহল জাগানো প্রশ্ন পোস্ট (Curiosity Hook)",
    "বিজ্ঞান ও ঐতিহ্যবাহী চিকিৎসার মিল (Science + Tradition)",
    "সার্ভিস পরিচিতি — নরম প্রমোশন (Soft CTA)",
    "সীমিত অফার / আর্জেন্সি পোস্ট (Urgency & Offer)",
    "সামাজিক প্রমাণ পোস্ট (Social Proof)",
    "FAQ স্টাইল পোস্ট",
    "লাইফস্টাইল ও প্রতিরোধমূলক স্বাস্থ্য পোস্ট",
    "মৌসুমী স্বাস্থ্য সতর্কতা (Seasonal Health Alert)",
    "স্বাস্থ্য টিপস — দ্রুত ও কার্যকর (Quick Health Tip)",
    "ভুল ধারণা সংশোধন (Common Misconception Fix)",
    "রোগের প্রাথমিক লক্ষণ চেনা (Early Warning Signs)"
]

EMOTIONS = [
    "বিশ্বাসযোগ্য ও আশ্বস্তকারী",
    "সহানুভূতিশীল ও বোঝাপড়ার টোন",
    "জরুরি ও সতর্কতামূলক",
    "অনুপ্রেরণামূলক ও আশাব্যঞ্জক",
    "কৌতূহল তৈরি করে এমন",
    "বন্ধুর মতো সরাসরি পরামর্শমূলক",
    "আত্মিক ও শান্তিপূর্ণ",
    "হালকা আবেগময় ও গল্পমুখর",
    "তথ্যভিত্তিক কিন্তু সহজ ভাষায়",
    "হালকা রসিকতার সাথে বাস্তব কথা"
]

AUDIENCES = [
    "দীর্ঘদিন ব্যথায় ভোগা যেকোনো বয়সের মানুষ",
    "অফিসে দীর্ঘসময় বসে কাজ করা কর্মজীবী",
    "ঘরোয়া কাজে ব্যস্ত গৃহিণী",
    "স্বাস্থ্য সচেতন তরুণ প্রজন্ম",
    "বয়স্ক ও দুর্বল স্বাস্থ্যের মানুষ",
    "ঘুমের সমস্যা বা দীর্ঘস্থায়ী ক্লান্তিতে ভোগা মানুষ",
    "ইসলামিক লাইফস্টাইল অনুসরণকারী মানুষ",
    "যারা ওষুধের পার্শ্বপ্রতিক্রিয়া থেকে মুক্তি চান",
    "যারা বারবার ডাক্তার দেখিয়েও সুস্থ হচ্ছেন না",
    "নতুন রোগী যারা বিকল্প চিকিৎসা সম্পর্কে জানতে চান",
    "ডায়াবেটিস বা রক্তচাপে আক্রান্ত মানুষ ও তাদের পরিবার",
    "মানসিক চাপ ও উদ্বেগে ভোগা মানুষ",
    "নারী — হরমোন, মাসিক বা পিসিওএস সমস্যায় ভোগা",
    "শিশুর স্বাস্থ্য নিয়ে চিন্তিত অভিভাবক"
]

CONTENT_FORMATS = [
    "গল্পের ঢঙে (Storytelling)",
    "প্রশ্ন দিয়ে শুরু (Question Hook)",
    "চমকানো তথ্য দিয়ে শুরু (Shocking Fact Hook)",
    "সংলাপ স্টাইল — দুজনের কথোপকথন (Dialogue Style)",
    "একজনের অভিজ্ঞতা বলার ভঙ্গিতে (First Person POV)",
    "তুলনা বা উপমা দিয়ে বোঝানো (Analogy Based)",
    "সমস্যা → কারণ → সমাধান কাঠামো (Problem-Cause-Solution)",
    "ভুল ধারণা দিয়ে শুরু তারপর সংশোধন (Myth First)"
]

CALL_TO_ACTION_STYLES = [
    "কমেন্টে জানাও তোমার অভিজ্ঞতা (Engagement CTA)",
    "যাদের দরকার তাদের শেয়ার করো (Share CTA)",
    "বিস্তারিত জানতে মেসেজ করো (DM CTA)",
    "অ্যাপয়েন্টমেন্ট নিতে লিংকে যাও (Link CTA)",
    "পরে কাজে আসবে — সেভ করে রাখো (Save CTA)",
    "কোনো সরাসরি CTA নেই — শুধু সচেতনতা (Awareness Only)",
    "পোলে ভোট দাও (Poll Style Engagement)"
]

TRUST_SIGNALS = [
    "বছরের অভিজ্ঞতা ও শত শত রোগীর সেবার উল্লেখ",
    "হাদিস বা ইসলামিক রেফারেন্স",
    "আধুনিক চিকিৎসাবিজ্ঞানের গবেষণার সাথে মিল",
    "রোগীর সন্তুষ্টি ও পরিবর্তনের উল্লেখ",
    "নিরাপদ, পার্শ্বপ্রতিক্রিয়ামুক্ত পদ্ধতির উল্লেখ",
    "WHO বা আন্তর্জাতিক স্বাস্থ্য সংস্থার তথ্যের উল্লেখ",
    "কোনো বিশেষ trust signal নেই — স্বাভাবিক রাখো"
]

CONTENT_GOALS = [
    "নতুন রোগী আনা (Lead Generation)",
    "বিদ্যমান রোগীদের ধরে রাখা (Retention)",
    "ব্র্যান্ড সচেতনতা বাড়ানো (Brand Awareness)",
    "শিক্ষামূলক তথ্য ছড়ানো (Education & Authority)",
    "ভাইরাল শেয়ার বাড়ানো (Virality)",
    "কমেন্ট ও এনগেজমেন্ট বাড়ানো (Engagement)",
    "নির্দিষ্ট সার্ভিসের চাহিদা তৈরি (Service Demand)"
]


def random_variation():
    season = get_season()
    seasonal_context = random.choice(SEASONAL_HEALTH_CONTEXT[season])
    day_context = get_day_context()

    return {
        "health_domain": random.choice(HEALTH_DOMAINS),
        "post_type": random.choice(POST_TYPES),
        "emotion": random.choice(EMOTIONS),
        "audience": random.choice(AUDIENCES),
        "content_format": random.choice(CONTENT_FORMATS),
        "cta_style": random.choice(CALL_TO_ACTION_STYLES),
        "trust_signal": random.choice(TRUST_SIGNALS),
        "content_goal": random.choice(CONTENT_GOALS),
        "season": season,
        "seasonal_context": seasonal_context,
        "day_context": day_context,
    }